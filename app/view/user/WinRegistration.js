/*
 * File: app/view/user/WinRegistration.js
 * Date: Thu Sep 17 2020 22:46:03 GMT+0300 (EEST)
 *
 * This file was generated by Sencha Architect version 3.2.0.
 * http://www.sencha.com/products/architect/
 *
 * This file requires use of the Ext JS 5.1.x library, under independent license.
 * License of Sencha Architect does not include license for Ext JS 5.1.x. For more
 * details see http://www.sencha.com/license or contact license@sencha.com.
 *
 * This file will be auto-generated each and everytime you save your project.
 *
 * Do NOT hand edit this file.
 */

Ext.define('yis.view.user.WinRegistration', {
    extend: 'Ext.window.Window',
    alias: 'widget.winRegistration',

    requires: [
        'yis.view.user.WinRegistrationViewModel',
        'Ext.tab.Panel',
        'Ext.tab.Tab',
        'Ext.form.Panel',
        'Ext.form.FieldSet',
        'Ext.form.field.Hidden',
        'Ext.form.Label',
        'Ext.form.field.Number',
        'Ext.form.field.Checkbox',
        'Ext.form.CheckboxGroup'
    ],

    viewModel: {
        type: 'winRegistration'
    },
    height: 615,
    hidden: false,
    id: 'winRegistration',
    width: 512,
    layout: 'fit',
    title: '',
    modal: true,

    items: [
        {
            xtype: 'tabpanel',
            id: 'pnTabRegistrazia',
            width: 500,
            activeTab: 0,
            items: [
                {
                    xtype: 'panel',
                    id: 'pnLogin',
                    width: 490,
                    layout: 'fit',
                    title: 'Авторизация',
                    tabConfig: {
                        xtype: 'tab',
                        style: 'background-color: #C2D9C9;border:0px;'
                    },
                    items: [
                        {
                            xtype: 'form',
                            height: 516,
                            id: 'fmLogin',
                            itemId: 'fmLogin',
                            width: 490,
                            layout: 'fit',
                            items: [
                                {
                                    xtype: 'fieldset',
                                    frame: true,
                                    height: 332,
                                    html: '<h3 class="login"><span>Авторизация</span></h3><h6 class="reg-text"><p>Если Вы еще не зарегистрированы ? <br>Вкладка регистрация</p></h6>',
                                    style: 'background-color: #DCDCDC;',
                                    width: 490,
                                    layout: 'absolute',
                                    title: '',
                                    items: [
                                        {
                                            xtype: 'hiddenfield',
                                            fieldLabel: 'Label',
                                            name: 'user_id'
                                        },
                                        {
                                            xtype: 'label',
                                            x: 55,
                                            y: 390,
                                            cls: 'no-login',
                                            hidden: true,
                                            id: 'chekLogin',
                                            width: 395,
                                            text: 'Неверный логин или пароль. Попытка №'
                                        },
                                        {
                                            xtype: 'numberfield',
                                            x: 122,
                                            y: 288,
                                            hidden: true,
                                            width: 45,
                                            fieldLabel: '',
                                            name: 'attempt',
                                            value: 0,
                                            hideTrigger: true,
                                            decimalPrecision: 0
                                        },
                                        {
                                            xtype: 'button',
                                            handler: function(button, event) {
                                                button.up('#winRegistration').close();
                                            },
                                            x: 10,
                                            y: 455,
                                            cls: 'button',
                                            id: 'btnExitActivation',
                                            width: 130,
                                            icon: 'resources/css/images/ico/door_out.png',
                                            scale: 'medium',
                                            text: 'Отмена'
                                        },
                                        {
                                            xtype: 'fieldset',
                                            x: 60,
                                            y: 155,
                                            height: 215,
                                            style: 'background-color: #F1EEEE;',
                                            width: 355,
                                            layout: 'absolute',
                                            title: '',
                                            items: [
                                                {
                                                    xtype: 'textfield',
                                                    x: 10,
                                                    y: 20,
                                                    frame: true,
                                                    id: 'login',
                                                    itemId: 'login',
                                                    width: 285,
                                                    fieldLabel: 'Логин',
                                                    labelPad: 2,
                                                    msgTarget: 'under',
                                                    name: 'login',
                                                    allowBlank: false,
                                                    blankText: 'Логин не введен',
                                                    maxLength: 20,
                                                    maxLengthText: 'Не более 20 символов',
                                                    minLength: 4,
                                                    minLengthText: 'Не менее 4 символов',
                                                    vtype: 'alphanum'
                                                },
                                                {
                                                    xtype: 'textfield',
                                                    x: 10,
                                                    y: 70,
                                                    id: 'password',
                                                    itemId: 'password',
                                                    width: 285,
                                                    fieldLabel: 'Пароль',
                                                    labelPad: 2,
                                                    msgTarget: 'under',
                                                    name: 'password',
                                                    inputType: 'password',
                                                    allowBlank: false,
                                                    blankText: 'Пароль не введен',
                                                    maxLength: 32,
                                                    maxLengthText: 'Не более 32 символов',
                                                    minLength: 6,
                                                    minLengthText: 'Не менее 6 символов'
                                                },
                                                {
                                                    xtype: 'checkboxfield',
                                                    x: 145,
                                                    y: 120,
                                                    fieldLabel: '',
                                                    name: 'memorize',
                                                    boxLabel: 'Запомнить меня',
                                                    inputValue: '1'
                                                },
                                                {
                                                    xtype: 'button',
                                                    x: 85,
                                                    y: 120,
                                                    id: 'info_remember',
                                                    icon: 'resources/css/images/ico/information.png',
                                                    text: '',
                                                    tooltip: 'Галочка в поле <Запомнить> - сохранит Ваш Логин и пароль на компьтере, что позволит Вам не заполнять поля  при следующей авторизации.'
                                                },
                                                {
                                                    xtype: 'button',
                                                    x: 120,
                                                    y: 165,
                                                    formBind: true,
                                                    cls: 'button',
                                                    id: 'btnInput',
                                                    itemId: 'btnInput',
                                                    width: 145,
                                                    icon: 'resources/css/images/btn32/contact_32.png',
                                                    scale: 'medium',
                                                    text: 'Вход'
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                },
                {
                    xtype: 'panel',
                    id: 'tabRegistration',
                    itemId: 'tabRegistration',
                    width: 500,
                    layout: 'fit',
                    title: 'Регистрация',
                    items: [
                        {
                            xtype: 'form',
                            cls: 'login',
                            height: 476,
                            id: 'fmRegistration',
                            itemId: 'fmRegistration',
                            width: 500,
                            layout: 'fit',
                            items: [
                                {
                                    xtype: 'fieldset',
                                    height: 389,
                                    html: '<h3 class="login"><span>Регистрация</span></h3>',
                                    style: 'background-color: #DCDCDC;',
                                    layout: 'absolute',
                                    title: '',
                                    items: [
                                        {
                                            xtype: 'fieldset',
                                            x: 50,
                                            y: 60,
                                            height: 270,
                                            html: '',
                                            style: 'background-color: #F1EEEE;',
                                            width: 360,
                                            layout: 'absolute',
                                            title: 'поля обязательные для заполнения',
                                            items: [
                                                {
                                                    xtype: 'textfield',
                                                    x: 50,
                                                    y: 5,
                                                    frame: true,
                                                    id: 'rlogin',
                                                    itemId: 'rlogin',
                                                    padding: '',
                                                    width: 265,
                                                    fieldLabel: 'Логин',
                                                    labelPad: 2,
                                                    labelWidth: 90,
                                                    msgTarget: 'under',
                                                    name: 'rlogin',
                                                    invalidText: 'только латиницей',
                                                    allowBlank: false,
                                                    blankText: 'Логин не введен',
                                                    maxLength: 20,
                                                    maxLengthText: 'Не более 20 символов',
                                                    minLength: 4,
                                                    minLengthText: 'Не менее 4 символов',
                                                    vtype: 'alphanum',
                                                    vtypeText: 'только латиницей'
                                                },
                                                {
                                                    xtype: 'textfield',
                                                    x: 50,
                                                    y: 50,
                                                    id: 'firstpassword',
                                                    width: 265,
                                                    fieldLabel: 'Пароль',
                                                    labelPad: 2,
                                                    labelWidth: 90,
                                                    msgTarget: 'under',
                                                    name: 'firstpassword',
                                                    inputType: 'password',
                                                    allowBlank: false,
                                                    blankText: 'Пароль не введен',
                                                    maxLength: 32,
                                                    maxLengthText: 'Не более 32 символов',
                                                    minLength: 6,
                                                    minLengthText: 'Не менее 6 символов'
                                                },
                                                {
                                                    xtype: 'textfield',
                                                    validator: function(value) {
                                                        //console.log(this);
                                                        var pwd = Ext.getCmp("firstpassword").getValue();
                                                        if (value === pwd){
                                                            return true;
                                                        }else{
                                                            return this.vtypeText;
                                                        }
                                                    },
                                                    x: 50,
                                                    y: 95,
                                                    id: 'confirmpassword',
                                                    itemId: 'confirmpassword',
                                                    width: 265,
                                                    fieldLabel: 'Повторить',
                                                    labelPad: 2,
                                                    labelWidth: 90,
                                                    msgTarget: 'under',
                                                    name: 'confirm',
                                                    inputType: 'password',
                                                    allowBlank: false,
                                                    blankText: 'Пароль не введен',
                                                    vtypeText: 'Пароли не равнозначны'
                                                },
                                                {
                                                    xtype: 'textfield',
                                                    x: 15,
                                                    y: 145,
                                                    frame: true,
                                                    id: 'remail',
                                                    itemId: 'remail',
                                                    width: 300,
                                                    fieldLabel: 'Ваш Email',
                                                    labelPad: 2,
                                                    labelWidth: 80,
                                                    msgTarget: 'under',
                                                    name: 'remail',
                                                    invalidText: '',
                                                    allowBlank: false,
                                                    blankText: 'Email адрес обязателен',
                                                    enforceMaxLength: false,
                                                    growMax: 150,
                                                    vtype: 'email',
                                                    vtypeText: 'Неправильный еmail'
                                                },
                                                {
                                                    xtype: 'checkboxgroup',
                                                    x: 0,
                                                    y: 190,
                                                    width: 340,
                                                    fieldLabel: '',
                                                    labelWidth: 235,
                                                    allowBlank: false,
                                                    blankText: 'Вы дожны прочитать соглашение',
                                                    items: [
                                                        {
                                                            xtype: 'checkboxfield',
                                                            handler: function(checkbox, checked) {
                                                                var pn = Ext.getCmp('pnTabRegistrazia');
                                                                if(checked===true){

                                                                    checkbox.setFieldLabel('Я прочитал соглашение о хранении и обработке персональных данных ');
                                                                    checkbox.setBoxLabel('согласен');
                                                                    pn.setActiveTab('pnSoglasie');


                                                                } else {
                                                                    checkbox.setFieldLabel('Соглашение о хранении и обработке персональных данных');
                                                                    checkbox.setBoxLabel('прочитать');


                                                                }
                                                            },
                                                            fieldLabel: 'Соглашение о хранении и обработке персональных данных ',
                                                            labelWidth: 235,
                                                            name: 'soglasie',
                                                            boxLabel: 'прочитать',
                                                            inputValue: '1'
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            xtype: 'button',
                                            x: 225,
                                            y: 460,
                                            formBind: true,
                                            cls: 'button',
                                            id: 'btnRegistrationForm',
                                            width: 220,
                                            icon: 'resources/css/images/btn32/contact_32.png',
                                            scale: 'medium',
                                            text: 'Зарегистрироваться'
                                        },
                                        {
                                            xtype: 'textfield',
                                            x: 105,
                                            y: 415,
                                            frame: true,
                                            id: 'rlastname',
                                            itemId: 'rlastname',
                                            padding: '',
                                            width: 265,
                                            fieldLabel: 'Отчество',
                                            labelPad: 2,
                                            labelWidth: 90,
                                            msgTarget: 'under',
                                            name: 'rlastname'
                                        },
                                        {
                                            xtype: 'textfield',
                                            x: 105,
                                            y: 345,
                                            frame: true,
                                            id: 'rsurname',
                                            itemId: 'rsurname',
                                            padding: '',
                                            width: 265,
                                            fieldLabel: 'Фамилия',
                                            labelPad: 2,
                                            labelWidth: 90,
                                            msgTarget: 'under',
                                            name: 'rsurname'
                                        },
                                        {
                                            xtype: 'textfield',
                                            x: 105,
                                            y: 380,
                                            frame: true,
                                            id: 'rfirstname',
                                            itemId: 'rfirstname',
                                            padding: '',
                                            width: 265,
                                            fieldLabel: 'Имя',
                                            labelPad: 2,
                                            labelWidth: 90,
                                            msgTarget: 'under',
                                            name: 'rfirstname'
                                        },
                                        {
                                            xtype: 'button',
                                            handler: function(button, event) {
                                                var winRegistration = Ext.getCmp('winRegistration');
                                                winRegistration.close();
                                            },
                                            x: 15,
                                            y: 460,
                                            cls: 'button',
                                            id: 'btnExitRegistration',
                                            width: 125,
                                            icon: 'resources/css/images/ico/door_out.png',
                                            scale: 'medium',
                                            text: 'Отмена'
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                },
                {
                    xtype: 'panel',
                    id: 'pnSoglasie',
                    scrollable: true,
                    title: 'Соглашение',
                    layout: {
                        type: 'vbox',
                        align: 'stretch'
                    },
                    items: [
                        {
                            xtype: 'fieldset',
                            html: '<p><IMG SRC="resources/css/images/logo.gif" class="leftimg" > <h4>Согласие на обработку персональных данных</h4></span>  <p style = "text-align: justify;">Я, клиент портала «Южненская Коммунальная Информационная Система», даю согласие на хранение и обработку моих персональных данных, а именно: фамилию, имя, отчество, местожительство, контактных телефонов, адреса электронной почты со стороны администрации портала на следующии цели:</p>   <p style = "text-align: justify;">предоставление клиентам данных по задолженности перед коммуннальными предприятиями , оплата коммуннальных услуг, а так же другие интернет-услуги.</p>  <p style = "text-align: justify;">Администрации портала «Южненская Коммунальная Информационная Система» обязуется осуществлять обработку персональных данных в соответствии с требованиями законодательства Украины по обработке персональных данных.</p> <p style = "text-align: justify;">Я согласен с тем, что мои персональные данные могут быть переданы третьим лицам, а именно Коммунальным предприятиям (службам) с которыми у меня заключены договора, если этого требуют условия предоставления заявленных мной услуг.</p>   <p style = "text-align: justify;">Я поручаю администрации портала «Южненская Коммунальная Информационная Система», в случае, если этого требуют правила или Регламенты соответствующих предприятий, служб , опубликовать мои персональные данные в базах данных,реестров соответствующих  предприятий, служб,  по форме и объемам, необходимыми для их функционирования.</p>   <p style = "text-align: justify;">Я согласен с тем, что отказ от предоставления согласия на обработку персональных данных или его отзыве может привести к следующему:</p>   <p style = "text-align: justify;">Отказ со стороны администрации портала «Южненская Коммунальная Информационная Система» в предоставлении соответствующих услуг;</p>  <p style = "text-align: justify;">Удаление или прекращение дальнейшего сопровождения и обработки персональных данных клиента.</p>   <p style = "text-align: justify;">Права клиента по отношению к его персональных данных указанные в ст. 8 Закона Украины «О защите персональных данных».</p>  <p style = "text-align: justify;"> Если клиент намерен отозвать свое согласие на обработку его персональных данных со стороны портала «Южненская Коммунальная Информационная Система», он совершает такой отзыв путем направления в адрес администрации соответствующего распоряжения письмом на Email  </p>  <p style = "text-align: justify;"><a href="mailto:yis@yuzhny.com?subject=Удаление персональных данных">Удаление персональных данных</a></p></p>',
                            style: 'background-color: #F1EEEE;',
                            title: ''
                        },
                        {
                            xtype: 'button',
                            handler: function(button, e) {
                                var pn = Ext.getCmp('pnTabRegistrazia');


                                pn.setActiveTab('tabRegistration');

                            },
                            margin: '5 60 10 60',
                            width: 100,
                            text: 'Согласен'
                        }
                    ]
                }
            ]
        }
    ]

});